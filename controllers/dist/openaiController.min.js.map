{"version":3,"sources":["openaiController.js"],"names":["require","Configuration","OpenAIApi","configuration","apiKey","env","OPENAI_API_KEY","openai","req","body","prompt","size","imageSize","generateImage","createImage","n","response","imageUrl","data","url","res","status","json","_context","t0","console","log","message","success","error","module","exports"],"mappings":"0BAAqCA,QAAQ,UAArCC,uBAAAA,cAAeC,mBAAAA,UAEjBC,cAFsC,IAACF,cAEL,CACtCG,OAHMH,QAGUI,IAAIC,iBAEhBC,OAAS,IAAIL,UAAUC,eAF3BC,cAAoBE,SAAAA,EAAAA,GAAAA,IAAAA,EAAAA,EAAAA,EAAAA,EAAAA,EAAAA,EAAAA,OAAAA,mBAAAA,MAAAA,SAAAA,GAAAA,OAAAA,OAAAA,EAAAA,KAAAA,EAAAA,MAAAA,KAAAA,EAAAA,OAAAA,EADtBE,EAAAC,KAAAC,EACsBJ,EADtBI,OAAAC,EACsBL,EADtBK,KAQQC,EAHFC,UAAAA,EAAgB,UAAOL,WAAvBK,EAAgB,UAAA,YAJAP,EAAAA,KAAAA,EAAAA,EAAAA,KAAAA,EAAAA,mBAAAA,MAIAC,OAAAO,YAAA,CAAAJ,OAAAA,EAAAK,EAAA,EAAAJ,KAAAC,KAJAN,KAAAA,EAIAU,EAJAV,EAAAA,KAIAW,EAAAD,EAAAE,KAAAA,KAAA,GAAAC,IAAAC,EAAAC,OAAA,KAAAC,KAAA,CAQhBZ,SAAAA,EACAK,KAAAA,IAbgBT,EAAAA,KAAAA,GAAAA,MAAAA,KAAAA,GAAAA,EAAAA,KAAAA,GAAAA,EAAAA,GAAAA,EAAAA,MAAAA,GAwBdiB,EAAAC,GAAMR,UApBQS,QAAAC,IAAAH,EAAAC,GAAAR,SAAAK,QAOZL,QAAAA,IAPYO,EAAAC,GAAAR,SAAAE,OAelBE,QAAIC,IAAAA,EAAAA,GAAJM,SAAqBP,EAAAC,OAArB,KAAAC,KAAA,CAfkBM,SAAA,EAAAC,MAAA,qCAJAvB,KAAAA,GAAAA,IAAAA,MAAAA,OAAAA,EAAAA,SAAAA,KAAAA,KAAAA,CAAAA,CAAAA,EAAAA,OAsCtBwB,OAAOC,QAAU,CAAElB,cAAAA","file":"openaiController.min.js","sourcesContent":["const { Configuration, OpenAIApi } = require('openai');\n\nconst configuration = new Configuration({\n  apiKey: process.env.OPENAI_API_KEY,\n});\nconst openai = new OpenAIApi(configuration);\n\nconst generateImage = async (req, res) => {\n  const { prompt, size } = req.body;\n\n  const imageSize =\n    size === 'small' ? '256x256' : size === 'medium' ? '512x512' : '1024x1024';\n\n  try {\n    const response = await openai.createImage({\n      prompt,\n      n: 1,\n      size: imageSize,\n    });\n\n    const imageUrl = response.data.data[0].url;\n\n    res.status(200).json({\n      success: true,\n      data: imageUrl,\n    });\n  } catch (error) {\n    if (error.response) {\n      console.log(error.response.status);\n      console.log(error.response.data);\n    } else {\n      console.log(error.message);\n    }\n\n    res.status(400).json({\n      success: false,\n      error: 'The image could not be generated',\n    });\n  }\n};\n\nmodule.exports = { generateImage };"]}